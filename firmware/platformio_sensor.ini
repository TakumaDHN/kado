; PlatformIO Configuration for Light Tower Sensor
; センサー用の設定ファイル
; このファイルを LightTower_Sensor/platformio.ini にコピーして使用してください

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; シリアル通信設定
monitor_speed = 115200
upload_speed = 921600
monitor_filters =
    esp32_exception_decoder
    time

; アップロード設定（必要に応じてポートを変更）
; upload_port = COM4
; monitor_port = COM4

; 必要なライブラリ
lib_deps =
    ; バッテリーゲージIC（MAX17043）
    https://github.com/DFRobot/DFRobot_MAX17043.git

    ; ESP32標準ライブラリ（自動的に含まれる）
    ; Wire (I2C通信)
    ; WiFi (ESP-NOW通信に必要)

; ビルドフラグ
build_flags =
    ; ESP32アーキテクチャ
    -D ARDUINO_ARCH_ESP32

    ; 省電力設定
    -D CONFIG_ESP32_DEFAULT_CPU_FREQ_80=y
    ; -D CONFIG_PM_ENABLE=y

    ; デバッグ設定（必要に応じて無効化）
    ; -D CORE_DEBUG_LEVEL=0

; パーティション設定（最小構成）
board_build.partitions = min_spiffs.csv

; フラッシュモード
board_build.flash_mode = qio
board_build.flash_size = 4MB

; ビルドタイプ（リリースビルドで省電力を最適化）
; build_type = release
build_type = debug

; 省電力最適化フラグ
; board_build.f_cpu = 80000000L
; board_build.f_flash = 40000000L

; RTC メモリの使用を有効化（ディープスリープでデータ保持）
; build_flags =
;     ${env.build_flags}
;     -D CONFIG_ESP32_RTC_CLK_SRC_INT_RC=y
